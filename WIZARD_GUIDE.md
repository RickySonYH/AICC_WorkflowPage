# 🧙‍♂️ 생성 마법사 가이드

## 개념 정리

### 워크플로우 (Workflow) = 블록 (Block)
- **정의**: 개별 대화 흐름의 최소 단위
- **예시**: "초기 인사", "고객 정보 확인", "주문 조회", "만족도 조사"
- **구성요소**: 
  - 노드 (시작, 메시지, 질문, 조건, API 호출, 종료)
  - 엣지 (노드 간 연결)
  - 설정값

### 시나리오 (Scenario) = 워크플로우 조합
- **정의**: 여러 워크플로우(블록)를 조합한 완전한 대화 시나리오
- **예시**: "기본 고객센터 응대 시나리오", "이커머스 주문 처리 시나리오"
- **구성요소**:
  - 선택된 워크플로우 목록
  - 레인별 워크플로우 배치 (시작 → 인증 → 인텐트 분류 → 업무 처리 → 종료)

---

## 1️⃣ 워크플로우 생성 마법사

### 목적
개별 블록(워크플로우)을 생성합니다.

### 접근 방법
1. **워크플로우 라이브러리** 탭 → **[+ 새 워크플로우]** 버튼
2. 시나리오 구성 탭 → 오른쪽 자산 패널 → **[+ 새 워크플로우 생성]** 버튼

### 4단계 프로세스

#### Step 1: 기본 정보
```
┌─────────────────────────────────────┐
│ 워크플로우 이름 *                    │
│ [예: 주문 취소 처리__________]      │
│                                      │
│ 설명                                 │
│ [고객의 주문 취소 요청을 처리하는   │
│  워크플로우입니다_______________]   │
└─────────────────────────────────────┘
```
- 워크플로우 이름 (필수)
- 설명 (선택)

#### Step 2: 카테고리 선택
```
┌─────────────────────────────────────┐
│ 공통                                 │
│   ☑ 고객 응대                       │
│   ☐ 시스템 관리                     │
│                                      │
│ 이커머스                             │
│   ☐ 주문 관리                       │
│   ☐ 배송 관리                       │
│   ☐ 취소/환불                       │
└─────────────────────────────────────┘
```
- 계층적 카테고리 구조에서 선택

#### Step 3: 고객 여정 단계 선택
```
┌─────────────────────────────────────┐
│ ☐ 시작 - 고객 여정의 시작 단계      │
│ ☐ 인증 - 고객 여정의 인증 단계      │
│ ☐ 인텐트 분류 - 용건 파악 단계      │
│ ☑ 업무 처리 - 실제 업무 처리 단계   │
│ ☐ 종료 - 고객 여정의 종료 단계      │
└─────────────────────────────────────┘
```
- 5가지 고객 여정 단계 중 선택

#### Step 4: 노드 유형 선택
```
┌─────────────────────────────────────┐
│ [M] 메시지                           │
│     고객에게 텍스트 메시지를 전달    │
│                                      │
│ [Q] 질문                             │
│     고객에게 질문하고 답변을 받음    │
│                                      │
│ [C] 조건 분기                        │
│     조건에 따라 다른 경로로 분기     │
│                                      │
│ [A] API 호출                         │
│     외부 API를 호출하여 데이터 가져옴│
└─────────────────────────────────────┘
```
- 주요 노드 유형 선택 (시각적 아이콘 포함)

### 생성 결과
- 워크플로우 라이브러리에 새 블록 추가됨
- 자동으로 라이브러리 탭으로 이동

---

## 2️⃣ 시나리오 생성 - 두 가지 모드

### 목적
여러 워크플로우(블록)를 조합한 완전한 시나리오를 생성합니다.

### 접근 방법
1. **시나리오 구성** 탭 → 상단 **[🎯 새 시나리오]** 버튼
2. **모드 선택 화면 표시** → 마법사 또는 플로우 에디터 선택

---

## 2-A. 시나리오 생성 - 마법사 모드 (추천)

### 4단계 프로세스

#### Step 1: 기본 정보
```
┌─────────────────────────────────────┐
│ 시나리오 이름 *                      │
│ [예: 기본 고객센터 응대 시나리오__] │
│                                      │
│ 설명                                 │
│ [고객이 처음 접속하여 상담원과       │
│  연결되기까지의 전체 흐름__________]│
│                                      │
│ 카테고리 *                           │
│ ( ) 공통  (●) 이커머스  ( ) 금융     │
└─────────────────────────────────────┘
```
- 시나리오 이름 (필수)
- 설명 (선택)
- 카테고리 선택 (필수)

#### Step 2: 템플릿 선택
```
┌─────────────────────────────────────┐
│ ☐ 빈 캔버스로 시작                   │
│    처음부터 직접 시나리오를 설계      │
│                                      │
│ ☑ 기본 CS 시나리오                   │
│    시작 → 인증 → 인텐트 → 처리 → 종료│
│    포함: 초기인사, 고객정보확인...    │
│                                      │
│ ☐ 이커머스 주문 처리                 │
│    인사 → 주문번호 → 조회 → 처리     │
│    포함: 초기인사, 주문번호인증...    │
└─────────────────────────────────────┘
```
- 빈 캔버스 또는 사전 정의된 템플릿 선택
- 템플릿 선택 시 포함된 워크플로우 미리보기

#### Step 3: 워크플로우 선택
```
┌─────────────────────────────────────┐
│ 시나리오에 포함할 워크플로우를 선택  │
│ 5개 선택됨                           │
│                                      │
│ ☑ 초기 인사            공통 • 시작   │
│ ☑ 채널 식별            공통 • 시작   │
│ ☑ 고객 정보 확인       공통 • 인증   │
│ ☐ 주문번호 인증        이커머스•인증  │
│ ☑ 용건 파악            공통•인텐트   │
│ ☑ 만족도 조사          공통 • 종료   │
│ ☐ 종료 멘트            공통 • 종료   │
│                                      │
│ ... (36개 중 스크롤 가능)            │
└─────────────────────────────────────┘
```
- 라이브러리의 모든 워크플로우 목록 표시
- 다중 선택 가능 (체크박스)
- 카테고리 필터 자동 적용

#### Step 4: 확인 및 완료
```
┌─────────────────────────────────────┐
│ 시나리오 이름                        │
│ 기본 고객센터 응대 시나리오           │
│                                      │
│ 설명                                 │
│ 고객이 처음 접속하여 상담원과...     │
│                                      │
│ 카테고리                             │
│ 이커머스                             │
│                                      │
│ 템플릿                               │
│ 기본 CS 시나리오                     │
│                                      │
│ 선택된 워크플로우 (5개)              │
│ [초기인사] [채널식별] [고객정보확인] │
│ [용건파악] [만족도조사]              │
└─────────────────────────────────────┘
```
- 입력한 모든 정보 최종 확인
- 선택된 워크플로우 태그로 표시

### 생성 결과
- 시나리오 구성 탭의 캔버스에 워크플로우 배치됨
- 자동으로 빌더 탭으로 이동하여 편집 가능

---

## 2-B. 시나리오 생성 - 플로우 에디터 모드 (고급)

### 특징
- **비주얼 캔버스**: 워크플로우를 노드로 시각화
- **드래그앤드롭**: 자유로운 배치와 이동
- **연결선 그리기**: 워크플로우 간 흐름 연결
- **조건 분기**: 복잡한 로직 구현 가능

### 화면 구성
```
┌─────────────────────────────────────────────────────────────┐
│ ECS이커머스 반품 안내 상담 시나리오  [+워크플로우] [저장] [✕]│
├─────────────────────────────────────────────────────────────┤
│                                                              │
│   [START]         [상태변경]        [상태변경]      [END]    │
│   초기 상담사 ──→  반품 안내 ─┬───→  메인 엔드 ───→ 종료    │
│      │                       │                              │
│      └───────────────────────┘                              │
│           loop(전환)         main(메인)                       │
│                                                              │
│   • 노드: 4개  • 연결: 4개  • 선택됨: 초기 상담사              │
└─────────────────────────────────────────────────────────────┘
```

### 주요 기능

#### 1. 워크플로우 추가
- 상단 **[+ 워크플로우 추가]** 버튼 클릭
- 오른쪽 사이드바에서 워크플로우 선택
- 캔버스에 노드 자동 생성

#### 2. 노드 편집
- **이동**: 노드 드래그하여 위치 조정
- **선택**: 노드 클릭하여 선택 (파란색 테두리)
- **삭제**: 노드 우측 상단 ✕ 버튼
- **설정**: 노드 우측 상단 ⚙ 버튼 (예정)

#### 3. 연결선 그리기 (예정)
- 시작 노드의 **오른쪽 연결점** 클릭
- 목표 노드의 **왼쪽 연결점**으로 드래그
- 연결선 라벨 입력 (예: "전환(loop)", "메인(main)")

#### 4. 노드 유형
- **START** (초록색): 시작 노드
- **상태 변경** (파란색): 일반 워크플로우
- **END** (빨간색): 종료 노드

### 캔버스 조작
- **스크롤**: 캔버스 드래그 또는 스크롤바
- **확대/축소**: Ctrl + 마우스휠 (예정)
- **그리드**: 20px 단위 정렬 가이드

### 저장 및 종료
- 상단 **[저장]** 버튼: 변경사항 저장
- **[저장 후 닫기]** 버튼: 저장하고 에디터 닫기
- **[취소]** 버튼: 변경사항 무시하고 닫기

---

## 모드 선택 화면

### 표시 시점
**[🎯 새 시나리오]** 버튼 클릭 시

### 선택지

#### 🧙‍♂️ 마법사 모드 (추천)
```
단계별 가이드를 따라 쉽고 빠르게 시나리오를 생성합니다.
초보자에게 적합합니다.

✓ 4단계 가이드
✓ 템플릿 선택
✓ 간편 구성

난이도: ★☆☆
생성 속도: 빠름
커스터마이징: 제한적
조건 분기: -
```

#### 🎨 플로우 에디터 모드 (고급)
```
비주얼 캔버스에서 워크플로우를 직접 배치하고 연결합니다.
세밀한 제어가 가능합니다.

✓ 드래그앤드롭
✓ 비주얼 연결
✓ 조건 분기

난이도: ★★★
생성 속도: 보통
커스터마이징: 자유로움
조건 분기: ✓
```

---

## 비교표

| 구분 | 워크플로우 생성 | 시나리오 생성 |
|------|----------------|--------------|
| **단위** | 개별 블록 | 블록의 조합 |
| **단계** | 4단계 | 4단계 |
| **Step 1** | 워크플로우 이름/설명 | 시나리오 이름/설명/카테고리 |
| **Step 2** | 카테고리 선택 | 템플릿 선택 |
| **Step 3** | 고객 여정 단계 선택 | 워크플로우 다중 선택 |
| **Step 4** | 노드 유형 선택 | 최종 확인 |
| **결과** | 라이브러리에 추가 | 캔버스에 배치 |
| **버튼 위치** | 라이브러리 탭, 빌더 자산 패널 | 빌더 캔버스 상단 |

---

## 사용 시나리오

### Case 1: 새로운 업무 플로우 추가
**상황**: 신규 "배송지 변경" 기능 추가

1. **워크플로우 생성 마법사** 실행
2. 이름: "배송지 변경 처리"
3. 카테고리: 이커머스 - 배송 관리
4. 단계: 업무 처리
5. 노드 유형: API 호출
6. → 라이브러리에 새 블록 생성됨

### Case 2: 완전히 새로운 서비스 시작
**상황**: 금융 상품 상담 서비스 런칭

1. **시나리오 생성 마법사** 실행
2. 이름: "금융 상품 상담 시나리오"
3. 카테고리: 금융
4. 템플릿: 빈 캔버스
5. 워크플로우 선택: 초기인사, 본인확인, 상품안내, 가입절차 등
6. → 캔버스에 전체 시나리오 구성됨

### Case 3: 기존 템플릿 기반 빠른 구성
**상황**: 이커머스 반품 프로세스 추가

1. **시나리오 생성 마법사** 실행
2. 이름: "이커머스 반품 처리"
3. 템플릿: "이커머스 주문 처리" 선택
4. 워크플로우 일부 수정 (반품 관련만 선택)
5. → 템플릿 기반으로 빠르게 구성

---

## 🎯 핵심 포인트

### 워크플로우 생성
- ✅ **개별 기능** 만들 때
- ✅ **재사용 가능한 블록** 만들 때
- ✅ **라이브러리 확장** 목적

### 시나리오 생성
- ✅ **전체 흐름** 구성할 때
- ✅ **여러 블록 조합** 필요할 때
- ✅ **빠른 프로토타이핑** 목적

---

## 테스트 방법

### 워크플로우 생성 테스트
1. http://localhost:5174 접속
2. **워크플로우 라이브러리** 탭 클릭
3. **[+ 새 워크플로우]** 버튼 클릭
4. 4단계 마법사 진행
5. "워크플로우(블록)가 생성되었습니다!" 알림 확인

### 시나리오 생성 테스트 - 마법사 모드
1. http://localhost:5174 접속
2. **시나리오 구성** 탭 클릭
3. 상단 **[🎯 새 시나리오]** 버튼 클릭
4. **마법사 모드** 선택
5. 4단계 마법사 진행
6. "시나리오가 생성되었습니다!" 알림 확인

### 시나리오 생성 테스트 - 플로우 에디터 모드
1. http://localhost:5174 접속
2. **시나리오 구성** 탭 클릭
3. 상단 **[🎯 새 시나리오]** 버튼 클릭
4. **플로우 에디터 모드** 선택
5. 비주얼 캔버스에서 노드 확인
6. **[+ 워크플로우 추가]** 버튼으로 노드 추가
7. 노드 선택/삭제 테스트
8. **[저장]** 버튼 클릭
9. "시나리오가 저장되었습니다!" 알림 확인

---

## 다음 단계 (구현 예정)

### Phase 1: 실제 데이터 저장
- 생성된 워크플로우를 상태에 저장
- 생성된 시나리오를 상태에 저장
- 캔버스에 실제 반영

### Phase 2: 시나리오 목록 뷰
- 생성된 시나리오 목록 표시
- 시나리오 선택 → 편집 뷰
- CRUD 작업 지원

### Phase 3: 워크플로우 상세 편집기
- 노드 추가/삭제/연결
- 노드 설정 편집
- 시각적 플로우 다이어그램

### Phase 4: 시나리오 실행 엔진
- 시나리오 시뮬레이션
- 실행 로그 기록
- 디버깅 도구

